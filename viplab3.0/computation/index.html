<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>Computation - ViPLab</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="../..">ViPLab</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../integration/">Integration</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../viplab-frontend/">Overview</a>
</li>

                        
                            
<li >
    <a href="../../viplab-frontend/tutorial/">Tutorial</a>
</li>

                        
                            
<li >
    <a href="../../viplab-frontend/frontend/">Frontend</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../">Overview</a>
</li>

                        
                            
<li class="active">
    <a href="./">Computation</a>
</li>

                        
                            
<li >
    <a href="../computation_result/">Computation Result</a>
</li>

                        
                            
<li >
    <a href="../computation_task/">Computation Task</a>
</li>

                        
                            
<li >
    <a href="../computation_template/">Computation Template</a>
</li>

                        
                            
<li >
    <a href="../system_status/">System Status</a>
</li>

                        
                            
<li >
    <a href="../versioning/">Versioning</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../history/">History</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../computation_result/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#computation-json-message">Computation JSON Message</a></li>
            <li class="second-level"><a href="#example-informal">Example (informal)</a></li>
                
            <li class="second-level"><a href="#explaining-the-json-format">Explaining the JSON Format</a></li>
                
                <li class="third-level"><a href="#json-objects-in-files">JSON objects in files</a></li>
                <li class="third-level"><a href="#json-objects-in-parts">JSON objects in parts</a></li>
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="computation-json-message">Computation JSON Message</h1>
<p>A <em>computation</em> represents the combination of a <em>computation template</em> and a
corresponding <em>computation task</em>. It is the input of any backend.</p>
<p>The JSON message of a <em>computation</em> is very similar to a <em>computation template</em>,
so the interested reader is also referred to <a href="../computation_template/">its documentation</a>.</p>
<h2 id="example-informal">Example (informal)</h2>
<p>Note: <code>//</code> with text following until EOL is a comment,</p>
<ul>
<li>which is not covered by the JSON spec, and</li>
<li>should not be contained in message sends in real;</li>
<li>but nevertheless it would help, if JSON parsers could just ignore them.</li>
</ul>
<pre><code>{ &quot;identifier&quot;  : &quot;4598393-95bf-409a-98a5-ee375982c3e&quot;, // uuid, created by websocket api
  &quot;environment&quot; : &quot;C&quot;, // important for interpreting configuration 
  &quot;files&quot; : // must: at least one array element
  [
    { &quot;identifier&quot;: &quot;22483f42-95bf-984a-98a5-ee9485c85c3e&quot;, // uuid from template 
      &quot;path&quot;      : &quot;code.c&quot;                                // filename on backend 
      &quot;parts&quot; : // must: at least one array element
      [ 
        { &quot;identifier&quot;: &quot;preamble&quot;,  // identifier from template
          &quot;access&quot;    : &quot;visible&quot;,   // access from template
          &quot;content&quot;   : &quot;I2luY2x1ZGUgPHN0ZGlvLmg-Cg&quot;      // source (base64url encoded) 
                                                          // decoded: #include &lt;stdio.h&gt;\n
        },
        { &quot;identifier&quot;: &quot;codeFromStudent&quot;, // identifier from template
          &quot;access&quot;    : &quot;modifiable&quot;,             
          &quot;content&quot; : &quot;dm9pZCBiYXIoKSB7IHByaW50ZigiYmFyIQoiKTsKfQo&quot; // content from task
                                    // decoded: void bar() { printf(\&quot;bar!\\n\&quot;);\n}\n 
        },
        { &quot;identifier&quot;: &quot;postscript&quot;, // identifier from template
          &quot;access&quot;    : &quot;visible&quot;,
          &quot;content&quot; : &quot;aW50IG1haW4oKSB7IGJhcigpOyByZXR1cm4gMDsgfQ&quot; // source
                                                // decoded: int main() { bar(); return 0; }
        }
      ] // parts[]
    }
  ], // files[]
  &quot;configuration&quot; :
  { &quot;compiling.compiler&quot; : &quot;gcc&quot;,                  
    &quot;compiling.flags&quot;    : &quot;-O2 -Wall&quot;            
    &quot;checking.sources&quot;   : [&quot;codeFromStudent&quot;],    // identifier to parts
    &quot;checking.forbiddenCalls&quot;: &quot;system execve&quot;     // forbidden call names separated by WS
    &quot;linking.flags&quot;      : &quot;-lm&quot;                 
    &quot;running.commandLineArguments&quot; : &quot;--stepwidth 0.5&quot;
                                            // mustache template with injected arguments
  }
}
</code></pre>
<h2 id="explaining-the-json-format">Explaining the JSON Format</h2>
<table>
<thead>
<tr>
<th>Key [--Subkey]</th>
<th>Type (a default is marked by <em>italics</em>)</th>
<th>Opt / Must</th>
<th>Description</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>identifier</td>
<td>string (UUID)</td>
<td>must</td>
<td>the identifier of this computation</td>
<td>is generated by the websocket api</td>
</tr>
<tr>
<td>environment</td>
<td _C_="&quot;C++&quot;," _Container_="&quot;Container&quot;," _DuMuX_="&quot;DuMuX&quot;" _Java_="&quot;Java&quot;," _Matlab_="&quot;Matlab&quot;," _Octave_="&quot;Octave&quot;,">one of</td>
<td>must</td>
<td>Specifies the environment used for the Computation. It defines language, runtime, libraries and tools</td>
<td></td>
</tr>
<tr>
<td>files</td>
<td>[ {...}, {...}, ... ]</td>
<td>must</td>
<td>array containing <a href="#json-objects-in-files">File objects</a>: there has to be at least one element</td>
<td></td>
</tr>
<tr>
<td>configuration</td>
<td>struct</td>
<td>opt/must (depends on environment)</td>
<td>Environment specific configurations</td>
<td>Different phases can be configured like compiling, checking (for legal function calls in source code), ...</td>
</tr>
<tr>
<td>configuration --compiling.sources</td>
<td>[FILE_ID, FILE_ID, ...]</td>
<td>must</td>
<td>Array of identifiers of <a href="#json-objects-in-files">JSON File objects</a>. Explicit compilation (only referenced sources will be compiled).</td>
<td>for <strong>C, C++, Java</strong></td>
</tr>
<tr>
<td>configuration --compiling.compiler</td>
<td>string</td>
<td>must</td>
<td>compiler to be used, e.g. "gcc"</td>
<td>for <strong>C, C++</strong></td>
</tr>
<tr>
<td>configuration --compiling.flags</td>
<td>string</td>
<td>must for <strong>C, C++</strong>; optional for <strong>Java</strong></td>
<td>CFLAGS for <strong>C/C++</strong>; compile flags for <strong>Java</strong></td>
<td>e.g. "gcc" for <strong>C/C++</strong>; "-O2" or "" for <strong>Java</strong></td>
</tr>
<tr>
<td>configuration --checking.sources</td>
<td>[PART_ID, PART_ID, ...]</td>
<td>must if checking should be performed</td>
<td>array of identifiers of to be checked sources; given by parts[]{PART_ID} (see <a href="#json-objects-in-parts">below</a>)</td>
<td>for <strong>Matlab, Octave, C, Java</strong></td>
</tr>
<tr>
<td>configuration --checking.allowedCalls</td>
<td>string</td>
<td>must if checking should be performed</td>
<td>for <strong>Matlab/Octave</strong>: <em>allowed</em> call names separated by WS; only idents (no braces, no func args)<br>for <strong>Java</strong>: <em>allowed</em> call name expressions separated by WS</td>
<td>for <strong>Java</strong> semantics see <a href="../computation_template/#java-checking-semantics">Java checking semantics</a>.</td>
</tr>
<tr>
<td>configuration --checking.forbiddenCalls</td>
<td>string</td>
<td>must if checking should be performed</td>
<td>for <strong>C</strong>: <em>forbidden</em> call names separated by WS; only idents (no braces, no func args)<br>for <strong>Java</strong>: <em>forbidden</em> call name expressions separated by WS</td>
<td>for <strong>C</strong> semantics see <a href="../computation_template/#c-checking-semantics">C checking semantics</a>); for <strong>Java</strong> semantics see <a href="computation_template.md/#java-checking-semantics">Java checking semantics</a>.</td>
</tr>
<tr>
<td>configuration --linking.flags</td>
<td>string</td>
<td>must</td>
<td>LFLAGS</td>
<td>for <strong>C, C++</strong>; e.g. ""</td>
</tr>
<tr>
<td>configuration --running.stdinFilename</td>
<td>FILE_ID</td>
<td>must</td>
<td>the file identifier that is passed to <strong>Matlab/Octave</strong> via standard-in</td>
<td></td>
</tr>
<tr>
<td>configuration --running.timelimitInSeconds</td>
<td>int</td>
<td>opt</td>
<td>CPU time limit</td>
<td>for all <strong>environments</strong>; for semantics see <a href="computation_template.md/#notes-to-timelimitinseconds">Notes to "timelimitInSeconds"</a>.</td>
</tr>
<tr>
<td>configuration --running.commandLineArguments</td>
<td>string</td>
<td>opt</td>
<td>for <strong>C, C++, Java</strong>: arguments given to main() function; for <strong>DuMuX, Container</strong>: additional command line args</td>
<td></td>
</tr>
<tr>
<td>configuration --running.flags</td>
<td>string</td>
<td>opt</td>
<td>flags given to JVM</td>
<td>for <strong>Java</strong></td>
</tr>
<tr>
<td>configuration --running.mainClass</td>
<td>string</td>
<td>opt (if unique) / must (if not unique)</td>
<td>class containing "public static void main(String[] args) {"</td>
<td>for <strong>Java</strong>: "args" may be another name. If main function is unique, its correct class should be detected automatically.</td>
</tr>
<tr>
<td>configuration --running.executable</td>
<td>string</td>
<td>must</td>
<td>name of executable to run (as in backend file system)</td>
<td>for <strong>DuMuX</strong></td>
</tr>
<tr>
<td>configuration --running.entrypoint</td>
<td>string</td>
<td>must</td>
<td>executable to run inside the container</td>
<td>for <strong>Container</strong></td>
</tr>
<tr>
<td>configuration --running.observe_stderr</td>
<td>bool (<em>false</em>)</td>
<td>opt</td>
<td>if true, transfer intermediate stderr Results</td>
<td>for <strong>DuMuX, Container</strong></td>
</tr>
<tr>
<td>configuration --resources.image</td>
<td>url</td>
<td>must</td>
<td>location of the image to be executed</td>
<td>for <strong>Container</strong>; has to be a tar</td>
</tr>
<tr>
<td>configuration --resources.volume</td>
<td>string</td>
<td>must</td>
<td>path in the container where data is placed</td>
<td>for <strong>Container</strong></td>
</tr>
<tr>
<td>configuration --resources.memory</td>
<td>string</td>
<td>opt (<em>64mb</em>)</td>
<td>memory limit for the container</td>
<td>for <strong>Container</strong></td>
</tr>
<tr>
<td>configuration --resources.numCPUs</td>
<td>int</td>
<td>opt</td>
<td>number of CPUs for the container</td>
<td>for <strong>Container</strong></td>
</tr>
</tbody>
</table>
<h3 id="json-objects-in-files">JSON objects in files</h3>
<p>An object in array files[] has the following members:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type (an enum default is marked by <em>italics</em>)</th>
<th>Opt / Must</th>
<th>Description</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>identifier</td>
<td>string (UUID)</td>
<td>must</td>
<td>reference to a computation template file</td>
<td></td>
</tr>
<tr>
<td>path</td>
<td>string</td>
<td>must</td>
<td>absolute path to file</td>
<td>It is <em>not</em> allowed to start with '/'</td>
</tr>
<tr>
<td>parts</td>
<td>[{...}, {...}, ...]</td>
<td>must</td>
<td>array containing <a href="#json-objects-in-parts">part objects</a>. There has to be at least one.</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="json-objects-in-parts">JSON objects in parts</h3>
<p>An object in array parts[] has the following members:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type (an enum default is marked by <em>italics</em>)</th>
<th>Opt / Must</th>
<th>Description</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>identifier</td>
<td>string</td>
<td>must</td>
<td>reference to a computation template part</td>
<td></td>
</tr>
<tr>
<td>access</td>
<td _invisible_="&quot;invisible&quot;," _modifiable_="&quot;modifiable&quot;," _template_="&quot;template&quot;" _visible_="&quot;visible&quot;,">one of</td>
<td>must</td>
<td>the access level of this part</td>
<td>equals to the access level of this part in the computation template</td>
</tr>
<tr>
<td>content</td>
<td>string</td>
<td>must</td>
<td>base64url-encoded source code</td>
<td></td>
</tr>
</tbody>
</table></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
