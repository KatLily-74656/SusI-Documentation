<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>Versioning - ViPLab</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="../..">ViPLab</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../integration/">Integration</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../viplab-frontend/">Overview</a>
</li>

                        
                            
<li >
    <a href="../../viplab-frontend/tutorial/">Tutorial</a>
</li>

                        
                            
<li >
    <a href="../../viplab-frontend/frontend/">Frontend</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Developer Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../">Overview</a>
</li>

                        
                            
<li >
    <a href="../computation/">Computation</a>
</li>

                        
                            
<li >
    <a href="../computation_result/">Computation Result</a>
</li>

                        
                            
<li >
    <a href="../computation_task/">Computation Task</a>
</li>

                        
                            
<li >
    <a href="../computation_template/">Computation Template</a>
</li>

                        
                            
<li >
    <a href="../system_status/">System Status</a>
</li>

                        
                            
<li class="active">
    <a href="./">Versioning</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../history/">History</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../system_status/">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../../history/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#json-object-versioning-rules">JSON Object Versioning Rules</a></li>
            <li class="second-level"><a href="#context-and-problem-statement">Context and Problem Statement</a></li>
                
            <li class="second-level"><a href="#decision-drivers">Decision Drivers</a></li>
                
            <li class="second-level"><a href="#considered-options">Considered Options</a></li>
                
            <li class="second-level"><a href="#decision-outcome">Decision Outcome</a></li>
                
                <li class="third-level"><a href="#positive-consequences">Positive Consequences</a></li>
                <li class="third-level"><a href="#negative-consequences">Negative Consequences</a></li>
            <li class="second-level"><a href="#pros-and-cons-of-the-options">Pros and Cons of the Options</a></li>
                
            <li class="second-level"><a href="#links">Links</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="json-object-versioning-rules">JSON Object Versioning Rules</h1>
<ul>
<li>Status: proposed</li>
<li>Deciders: Leon Kiefer, Per Pascal Seeland</li>
<li>Date: 2020-05-14</li>
</ul>
<p>Technical Story: https://github.com/VirtualProgrammingLab/documentation/issues/1</p>
<h2 id="context-and-problem-statement">Context and Problem Statement</h2>
<p>The ViPLab Projects defines a set of JSON-objects, which are used in the different components of the project. Since ViPLab itself does not 
store any data, these objects have to be stored by third party systems. These will be, depending on the context they are used in either LMS (like ILIAS)
or data repositories (like dataverse). There needs to be a way to identify the version of the different objects stored by the third party system to 
allow e.g. upgrading/migrating the different components. </p>
<h2 id="decision-drivers">Decision Drivers</h2>
<ul>
<li>Provide a way to identify the version of the objects and also provide a path for e.g. upgrading the API endpoints used by those systems.</li>
</ul>
<h2 id="considered-options">Considered Options</h2>
<ul>
<li>Version all endpoints, but not the objects</li>
<li>Version all objects, but not the endpoints</li>
<li>Version parts of the objects and all of the endpoints.</li>
<li>Version all objects and all of the endpoints.</li>
</ul>
<h2 id="decision-outcome">Decision Outcome</h2>
<p>It has been decided to version all long living objects, and all endpoints. The reason for requiring all objects to have version tags is for consistency
reasons. Endpoints will only accept objects versions of one major version. Breaking changes will require to define a new version. Incremental 
updates, which only extend the object are allowed. All systems are expected to handle these incremental updates gracefully. This means that a
version 3.1.x message returned by the api must be accept by a 3.0.x client. The additional information contained by the api may be discarded. The same
rules apply when a 3.1.x client talks to a 3.0.x api. The api will process the message according to the 3.0.x rules and extra information might be discarded.</p>
<p>The client has to determine the correct endpoint versions to use. When the client will use a ComputationTemplate with version 3.x.x the corresponding
websocket api will be ws://example.com/v3/computation. All other messages used in any further communication between the websocket-api and the client
are also expected to be version 3.x.x. There is no possiblity to mix different versions. If a client wants to use a v4 api, he has to reconnect to the correct
endpoint at ws://example.com/v4/computation</p>
<p>The objects have been devided into three groups:
- Long living object: ComputationTemplate, ComputationTask and ComputationResult
- Wrappers: Computation
- Message Types: CreateComputation and Result</p>
<p>All long living objects are expected to be stored by clients and have version attribute on their top level of the json object, making it easy to get the information. Wrappers only exist during the communication between the client and the api and thus will not contain any version information, as it can be derived from the version of the api version they are being used with. Their only functionality is to group long living objects during a request. Messages Types are the messages used for the communication of the client with the websocket api. Like the wrappers they belong to a specific endpoint version and are also not versioned.</p>
<h3 id="positive-consequences">Positive Consequences</h3>
<p>Providing version information allows api and the client to be updated independently. It also allows the objects being held by the client to be easily identified without the need to either store this information somewhere external, where is might get lost or require some method to identify it based on the attributes available.</p>
<h3 id="negative-consequences">Negative Consequences</h3>
<p>The version needs to stored on all objects, which requires additional space and bandwidth. Also this information needs to be processed in the endpoints. But this in neglactable considered to the need of upgrading different systems of different third party users at once.</p>
<h2 id="pros-and-cons-of-the-options">Pros and Cons of the Options</h2>
<p>Versioning either only the endpoints would still cause the issue, that a client needs to keep track of which implicit version an object has, to make sure he picks
the right endpoint. This might also lead to the fact, that one might try to send the data to the wrong endpoint, since it is not known where it should belong.
Only versioning the endpoints would require to add a lot of version identification cold on the api side, which should be avoided.</p>
<p>Between the last to options, the only difference is, that the actions wrappers are not being versioned. This tradeoff has been made due to the fact, that they should never be stored somewhere and that they are considered stable for one api version. Adding actions or changing the wrappers itself will cause a upgrade of the api version.</p>
<h2 id="links">Links</h2></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
          
            <hr>
            <p>
            <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
            </p>
          

          
          
      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
